<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Animated Biomorphic Pattern - Smooth Shapes</title>
    <style>
        /* Ensure the canvas covers the full viewport */
        body, html {
            margin: 0;
            padding: 0;
            background-color: rgb(24, 23, 23);
            overflow: hidden;
        }
        canvas {
            display: block;
        }
    </style>
</head>
<body>

    <!-- Fullscreen Canvas -->
    <canvas id="canvas"></canvas>

    <script>
        // Get the canvas element and context
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');

        // Resize canvas to fill the browser window dynamically
        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();

        // Number of amoeba shapes
        const amoebaCount = 25;
        const amoebas = [];

        // Create amoeba shapes
        for (let i = 0; i < amoebaCount; i++) {
            amoebas.push(createAmoeba());
        }

        // Function to create an amoeba shape
        function createAmoeba() {
            const points = [];
            const pointCount = 16; // Increased number of points for smoother shape
            const centerX = Math.random() * canvas.width;
            const centerY = Math.random() * canvas.height;
            const baseRadius = Math.random() * 100 + 50;
            const speed = Math.random() * 0.005 + 0.002; // Reduced speed range
            const offset = Math.random() * 1000;

            // Initialize points
            for (let i = 0; i < pointCount; i++) {
                const angle = (Math.PI * 2 / pointCount) * i;
                points.push({
                    angle: angle,
                    baseRadius: baseRadius + Math.random() * 20 - 10,
                    speed: speed,
                    offset: offset + i * 10
                });
            }

            return {
                centerX: centerX,
                centerY: centerY,
                points: points,
                hue: Math.floor(Math.random() * 360),
                rotation: Math.random() * Math.PI * 2,
                rotationSpeed: (Math.random() - 0.5) * 0.002 // Slower rotation
            };
        }

        // Animation loop
        function animate() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Draw each amoeba
            for (let amoeba of amoebas) {
                drawAmoeba(amoeba);
            }

            requestAnimationFrame(animate);
        }

        // Function to draw an amoeba shape
        function drawAmoeba(amoeba) {
            ctx.save();
            ctx.translate(amoeba.centerX, amoeba.centerY);
            ctx.rotate(amoeba.rotation);
            amoeba.rotation += amoeba.rotationSpeed;

            const points = amoeba.points;
            const timeFactor = 3; // Slower animation
            const pointPositions = [];

            // First, calculate the positions of all points
            for (let i = 0; i < points.length; i++) {
                const p = points[i];

                // Calculate the animated radius
                const radius = p.baseRadius + Math.sin((performance.now() / timeFactor) * p.speed + p.offset) * 10;

                const x = Math.cos(p.angle) * radius;
                const y = Math.sin(p.angle) * radius;

                pointPositions.push({ x: x, y: y });
            }

            // Now, draw the shape using cubic Bezier curves
            ctx.beginPath();
            ctx.moveTo(pointPositions[0].x, pointPositions[0].y);

            for (let i = 0; i < pointPositions.length; i++) {
                const p0 = pointPositions[i];
                const p1 = pointPositions[(i + 1) % pointPositions.length];

                const p_prev = pointPositions[i === 0 ? pointPositions.length - 1 : i - 1];
                const p_next = pointPositions[(i + 2) % pointPositions.length];

                const cp1x = p0.x + (p1.x - p_prev.x) / 6;
                const cp1y = p0.y + (p1.y - p_prev.y) / 6;

                const cp2x = p1.x - (p_next.x - p0.x) / 6;
                const cp2y = p1.y - (p_next.y - p0.y) / 6;

                ctx.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, p1.x, p1.y);
            }

            ctx.closePath();
            ctx.fillStyle = `hsla(${amoeba.hue}, 70%, 50%, 0.5)`;
            ctx.fill();

            ctx.restore();
        }

        animate();
    </script>

</body>
</html>
